<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>å½’å…ƒå¼ˆ - äº”è¡Œç¾å­¦</title>
  <link rel="stylesheet" href="/src/style.css">
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
</head>
<body>
  <div id="app">
    <div class="bg-glow"></div>

    <!-- è½¬åœºåŠ¨ç”»å…ƒç´  -->
    <div id="taiji-core" style="display:none;">
        <div class="y-body"></div>
        <div class="y-head"></div>
        <div class="i-head"></div>
    </div>
    <div id="orb-yang" class="projectile" style="display:none;"></div>
    <div id="orb-yin" class="projectile" style="display:none;"></div>
    <div id="ripple-up" class="ripple"></div>
    <div id="ripple-down" class="ripple"></div>

    <!-- ä¸»èœå•å±‚ -->
    <div id="menu-layer">
      <div id="menu-orbs-container" style="position: absolute; inset:0; pointer-events: none;"></div>
      <h1 class="menu-title" id="title">å½’å…ƒå¼ˆ</h1>
      <div class="menu-buttons" id="menuButtons">
        <button class="menu-btn" data-mode="0">ç©å®¶ VS ç©å®¶</button>
        <button class="menu-btn" data-mode="1">ç©å®¶ VS å¤©é“</button>
        <button class="menu-btn" data-mode="2">å¤©é“è¿è½¬</button>
        <button class="menu-btn" id="leaderboard-btn">å¤©é“æ¦œ</button>
      </div>
    </div>

    <!-- æ’è¡Œæ¦œå±‚ -->
    <div id="leaderboard-layer" style="display: none;">
      <div class="leaderboard-container">
        <div class="leaderboard-header">
          <h2 class="leaderboard-title">ğŸ† å¤©é“æ¦œ</h2>
          <button class="leaderboard-close" id="leaderboard-close">âœ•</button>
        </div>
        <div class="leaderboard-content">
          <div class="leaderboard-loading" id="leaderboard-loading">åŠ è½½ä¸­...</div>
          <div class="leaderboard-table-wrapper" id="leaderboard-table-wrapper">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>æ’å</th>
                  <th>ç©å®¶</th>
                  <th>æœ€é«˜åˆ†</th>
                  <th>æ€»å±€åˆ†</th>
                  <th>èƒœåœº</th>
                </tr>
              </thead>
              <tbody id="leaderboard-body">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
              </tbody>
            </table>
          </div>
          <div class="leaderboard-footer">
            <span class="last-updated" id="last-updated"></span>
          </div>
        </div>
      </div>
    </div>

    <!-- æ¸¸æˆåŒºåŸŸå±‚ -->
    <div id="battle-layer" style="display: none;">
      <!-- é¡¶éƒ¨ï¼šå¯¹å®¶åˆ†æ•° -->
      <div class="score-panel-top">
        <span class="score-value" id="score-p2">0</span>
      </div>

      <div class="player-area">
        <!-- ä¸Šæ–¹ç©å®¶ P2 -->
        <div class="taiji-star" id="p2-star">
          <div class="pentagram-container"></div>
          <div id="p2-center-stem" class="center-stem"></div>
        </div>

        <!-- ä¸­å¤®ï¼šå›åˆæç¤ºï¼ˆæ¥šæ²³æ±‰ç•Œï¼‰ -->
        <div class="turn-center">
          <div class="turn-info" id="turn-info">
            <span class="turn-count" id="turn-count">1</span>
            <span class="turn-divider">/</span>
            <span class="turn-max">60</span>
          </div>
        </div>

        <!-- ä¸‹æ–¹ç©å®¶ P1 -->
        <div class="taiji-star" id="p1-star">
          <div class="pentagram-container"></div>
          <div id="p1-center-stem" class="center-stem"></div>
        </div>
      </div>

      <!-- åº•éƒ¨ï¼šæœ¬å°Šåˆ†æ•° -->
      <div class="score-panel-bottom">
        <span class="score-value" id="score-p1">0</span>
      </div>
    </div>
    
    <!-- å…ˆåæ‰‹æç¤ºæ–‡å­— -->
    <div id="init-message"></div>

    <!-- èƒœåˆ©å¼¹çª— -->
    <div id="victory-popup" class="victory-popup" style="display: none;">
      <div class="victory-content">
        <h2 class="victory-title" id="victory-title">èƒœåˆ©</h2>
        <p class="victory-reason" id="victory-reason"></p>
        <div class="victory-scores">
          <div class="victory-score p1">
            <span class="score-label">æœ¬å°Š</span>
            <span class="score-value" id="victory-score-p1">0</span>
          </div>
          <div class="victory-score p2">
            <span class="score-label">å¯¹å®¶</span>
            <span class="score-value" id="victory-score-p2">0</span>
          </div>
        </div>
        <button class="victory-btn" id="victory-back-btn">è¿”å›ä¸»èœå•</button>
      </div>
    </div>

    <!-- ç­‰å¾…/åŒ¹é…ç•Œé¢ -->
    <div id="waiting-layer" class="waiting-layer" style="display: none;">
      <div class="waiting-content">
        <h2 class="waiting-title" id="waiting-title">ç­‰å¾…å¯¹æ‰‹åŠ å…¥...</h2>
        <div class="waiting-actions" id="waiting-actions">
          <button class="menu-btn waiting-copy-btn" id="waiting-copy-btn">å¤åˆ¶é‚€è¯·é“¾æ¥</button>
        </div>
        <div class="waiting-status" id="waiting-status" style="display: none;">
          <p>ç­‰å¾…å¼€å§‹...</p>
        </div>
        <button class="menu-btn waiting-cancel-btn" id="waiting-cancel-btn">å–æ¶ˆ</button>
      </div>
    </div>
  </div>
  <script>
    // æ•è·æ‰€æœ‰é”™è¯¯å¹¶æ˜¾ç¤º
    window.onerror = function(msg, url, line, col, error) {
      document.body.innerHTML += '<div style="position:fixed;top:0;left:0;background:red;color:white;padding:10px;z-index:9999;">ERROR: ' + msg + ' at ' + url + ':' + line + ':' + col + '</div>';
      return false;
    };
    window.addEventListener('unhandledrejection', function(e) {
      document.body.innerHTML += '<div style="position:fixed;top:30px;left:0;background:orange;color:white;padding:10px;z-index:9999;">PROMISE ERROR: ' + e.reason + '</div>';
    });
  </script>
  <script type="module" src="/src/main.js"></script>
</body>
</html>